<!doctype html> <html> <head> <meta charset=utf-8> <meta http-equiv=x-ua-compatible content="ie=edge"> <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"> <title>Ergotron</title> <meta name=description content="Benjamin Van Ryseghem's website"/> <link rel="shortcut icon" href="/AAAAAAAAGithubHook/favicon.png" type="image/x-icon"/> <link rel=stylesheet href="/AAAAAAAAGithubHook/javascripts/lightbox2/css/lightbox.css"> <link rel=stylesheet href="/AAAAAAAAGithubHook/lib/leaflet/leaflet.css"> <link rel=stylesheet href="/AAAAAAAAGithubHook/lib/malihu-custom-scrollbar/jquery.mCustomScrollbar.min.css"> <script src="../../javascripts/jquery/jquery.min.js"></script> <script src="../../javascripts/vertical-line.js"></script> <script src="/AAAAAAAAGithubHook/lib/leaflet/leaflet.js"></script> <script src="/AAAAAAAAGithubHook/lib/malihu-custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script> <script src="/AAAAAAAAGithubHook/lib/scrollmagic/ScrollMagic.min.js"></script> <script src="/AAAAAAAAGithubHook/lib/greensock-js/TweenMax.js"></script> <script src="/AAAAAAAAGithubHook/lib/greensock-js/TimelineMax.min.js"></script> <script src="/AAAAAAAAGithubHook/lib/drawSVG.js"></script> <script src="/AAAAAAAAGithubHook/lib/scrollmagic/plugins/debug.addIndicators.min.js"></script> <script src="/AAAAAAAAGithubHook/lib/scrollmagic/plugins/animation.gsap.min.js"></script> <link href="../../stylesheets/font-awesome.min.css" rel=stylesheet /> <link href="../../stylesheets/fonts/ubuntu/ubuntu.css" rel=stylesheet /> <link href="../../stylesheets/fonts/raleway/raleway.css" rel=stylesheet /> <link href="../../stylesheets/pygment_trac.css" rel=stylesheet /> <link href="../../stylesheets/site.css" rel=stylesheet /> </head> <body class="blog blog_ergotron blog_ergotron_index"> <div id=header_wrap class=outer> <header class=inner> <h1 id=project_title>Ergotron</h1> <span id=project_tagline>A little how to and some explanations about Ergotron, a keyboard inspired by Ergo Dox and Maltron.</span> <div class=words-count> 1532 words - 10' to read </div> </header> </div> <div id=main_content_wrap class=outer> <section id=main_content class=inner> <div class=article> <p>After looking for the perfect keyboard, and trying a couple of them (<a href="http://www.wasdkeyboards.com/index.php/products/mechanical-keyboard/wasd-v2-87-key-custom-mechanical-keyboard.html">WASD Keyboard</a>, <a href="http://www.kinesis-ergo.com/shop/advantage-for-pc-mac/">Kinesis</a>, <a href="http://www.maltron.com/keyboard-info/dual-hand-fully-ergonomic-3d-keyboards">Maltron</a>), I reached the conclusion that I should probably build my own keyboard. And so I did. <p><a class=popup-link href="../../images/post/Ergotron.jpg" title="Finished Keyboard"></a></p> <h2>Introduction</h2> <p>I was previously using a <a href="http://www.maltron.com/keyboard-info/dual-hand-fully-ergonomic-3d-keyboards">Two Hand Fully Ergonomic (3D) Keyboards</a> by Maltron. I really loved it, but there was a couple of hiccups that pushed me to look even further.</p> <p>The first issue was that they do not offer Cherry MX Green by default. Even if they are completely fine with ordering some and building your keyboard with them, it comes with a supplement (75£) and a delay of 10 working days.</p> <p>The second problem was minor bugs in the firmware. Even though it is not such of a problem, as I like to remap all my keys to try new improvements, it became quite an issue pretty fast. And the fact that you can not flash the PCB made it really hard. Still I have to say that Maltron was really understanding, and shipped me a new PCB as soon as they fixed an issue. But as a programmer myself, I was quite frustrated not to be able to have a peek at the firmware code.</p> <p>The third issue, even though it is a minor one, is that the usb cable is plugged directly on the PCB. It makes the keyboard very fragile to me. And killing your keyboard because you stepped on the cable is not something I want to experiment.</p> <p>Being able to have full control over the code and the hardware is what caught the most my attention about the <a href="https://www.ergodox.io/">Ergo Dox</a> project. Big problem, I am really not a fan of split keyboards. And since I was used to (and love) the 3D keyboards, I decided to go this way. Inspired by Ergo Dox, I had a clear idea of the software, and the electronics. But how to resolve the keyboard shell issue? At first I tried to find a 3D model of the Maltron keyboard somewhere online, hoping that someone already did it. But I think the Maltron keyboard is too much of a niche keyboard. Hopeless I decided to send an email to Maltron to know if they sell spare part, expecting them to decline my proposal arguing I&rsquo;d better buy a keyboard from them. I was so wrong! The person I was discussing with (named Martin) was really helpful and enthusiastic about my project, asking for news and pictures, proposing help, providing parts etc. It was an amazing experience.</p> <h2>Building the keyboard</h2> <p>At this moment, I ordered every pieces and electronic parts, and decided to have a look at the firmware during the delivery time.</p> <h3>Firmware</h3> <p>As I previously said, the starting point of the adventure was the <a href="https://www.ergodox.io/">Ergo Dox</a> project. So it felt quite natural to first have a look at their firmware. It is published under the MIT license on <a href="https://github.com/benblazak/ergodox-firmware">GitHub</a>. One click later I had a fork on it ready to be hacked.</p> <p>The first thing I noticed reading <a href="https://github.com/benblazak">Ben Blazak</a>&lsquo;s code was how clean and well documented it is. After a couple of hours reading the code, I felt like I had enough of a mental picture of the architecture to start tweaking the code.</p> <p>The first issue I had to address was the additional keys. Indeed, there is support for 84 keys (6 rows time 14 columns) in the original code where there are 110 keys on a Maltron keyboard. Luckily enough there is just enough port to handle the extra columns on the chips. As I had no prior experience with such low level programming, it took me some time to understand the Teensy 2.0 documentation. But after that, it felt quite easy to extend the code.</p> <p>Once the supplementary keys were supported (I have to say that I had no way yet to test my code), I started to implement a couple of layouts for the 110 keys.</p> <p><a class=popup-link href="../../images/post/ergotron/layout.png" title="Rows and columns layout"></a></p> <p>That was the moment I received the first batch of components. And with them I had the opportunity to build a first prototype and to try my code. No need to say it was <em>not</em> working. And guess what? It is not that fun to debug a device without a standard output. Luckily enough the Ergo Dox firmware comes with a debugging function which &ldquo;print&rdquo; a string. By printing I mean it simulates someone typing it on the keyboard. So after a couple of hours putting some debug print every other line, I was able to fix the bugs. It was now time to wait for the hardware parts.</p> <p><a class=popup-link href="../../images/post/ergotron/proto.jpg" title="Debugging prototype"></a></p> <p>This part took me roughly 5 hours.</p> <h3>Hardware</h3> <h4>The PCB</h4> <p>The first step to build the hardware was to solder every components on the PCB, taking care of the cable disposition. No major issue here except the fact that my soldering iron is getting really old. After 4 or 5 hours of soldering, the PCB was ready.</p> <div class=gallery> <div class=gallery-container> <a href="../../images/post/ergotron/pcb1.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb1.jpg"> </a> <a href="../../images/post/ergotron/pcb2.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb2.jpg"> </a> <a href="../../images/post/ergotron/pcb3.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb3.jpg"> </a> <a href="../../images/post/ergotron/pcb4.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb4.jpg"> </a> <a href="../../images/post/ergotron/pcb5.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb5.jpg"> </a> <a href="../../images/post/ergotron/pcb6.jpg" data-lightbox=pcb> <img class=thumbnail src="../../images/post/ergotron/pcb6.jpg"> </a> </div> </div> <p>I did some testing to be sure the soldering points were correct, and after fixing few of them, I hot glued the PCB to the lower part of the keyboard shell. I first made a couple of trials to find the correct position, the IDC connector being higher than I first thought. This done, I was ready for the next part.</p> <p>This part took me roughly 5 hours.</p> <h4>Tweaking the shell</h4> <p>When Martin sent me the shell parts, he gently added the plastic bars used to connect the two parts together. I decided to start with that. Now I think it was a <em>huge</em> mistake and should have been done last.</p> <p><a class=popup-link href="../../images/post/ergotron/bars.jpg" title="Glued bars"></a></p> <p>I also made the hole for the USB panel mount. It was a bit harder than expected, especially because I do not have the proper tools. But all in all I think the output is ok.</p> <p><a class=popup-link href="../../images/post/ergotron/usb.jpg" title="USB hole"></a></p> <p>This part took me roughly half an hour.</p> <h4>The key switches</h4> <p>Now the goal was to solder the matrix layout on the switches. First I tinned all the switches. Second I bent and tinned the anode side of each diode. Once this was done, I inserted all the switches in the upper part of the shell. I was wondering if I should glue them, but finally the holes were made precisely, so the switches fit perfectly.</p> <div class=gallery> <div class=gallery-container> <a href="../../images/post/ergotron/switch1.jpg" data-lightbox=switch> <img class=thumbnail src="../../images/post/ergotron/switch1.jpg"> </a> <a href="../../images/post/ergotron/switch2.jpg" data-lightbox=switch> <img class=thumbnail src="../../images/post/ergotron/switch2.jpg"> </a> </div> </div> <p>The tedious part could start. Indeed, this was the moment to solder a diode on each switch, and to connect all of them in a matrix. Beside being quite of a long job, having already glued the support bars was really making the upper row soldering a nightmare.</p> <p>As the PCB is inspired from a split keyboard, the matrix is actually made in two parts. So I soldered the matrix one side at a time. After a couple of trials, I found a good enough technique. I started by making the whole row cable, soldering together enough small cables. Then I soldered the complete row. And finally, for each key in the row, I soldered the diode. When the 6 rows were done, I soldered the columns, and trimmed the diode pin. Then I connected each row and column to the correspondent flat cable.</p> <div class=gallery> <div class=gallery-container> <a href="../../images/post/ergotron/matrix1.jpg" data-lightbox=matrix> <img class=thumbnail src="../../images/post/ergotron/matrix1.jpg"> </a> <a href="../../images/post/ergotron/matrix2.jpg" data-lightbox=matrix> <img class=thumbnail src="../../images/post/ergotron/matrix2.jpg"> </a> <a href="../../images/post/ergotron/matrix3.jpg" data-lightbox=matrix> <img class=thumbnail src="../../images/post/ergotron/matrix3.jpg"> </a> </div> </div> <p>About the LEDs, I drilled little holes and made them bigger a bit at a time until the LED fitted nicely in it. Then I glued each led with some super glue.</p> <p>I then tried the connections, fixed the broken soldering points and hot glued the flat cables to the shell to prevent to accidently tear apart the matrix.</p> <p>Each side roughly took me 10 hours of soldering.</p> <h2>Conclusion</h2> <p>After around 30 hours of work, spread over three weekends, I finally had a working keyboard proudly made by myself. I am now using it for a month and it works like a charm. I am still looking for nice stickers to customize it, so if you have suggestions, feel free to contact me.</p> <h3>References</h3> <p>Here are a few links I found useful when doing the keyboard, as well as my GitHub repository for the keyboard firmware:</p> <ul> <li><a href="https://github.com/BenjaminVanRyseghem/ergotron-firmware">ergotron-firmware</a>: the firmware for the Ergotron keyboard.</li> <li><a href="https://github.com/benblazak/ergodox-firmware">ergodox-firmware</a>: the official Ergo Dox firmware repository.</li> <li><a href="https://keyboard-configurator.massdrop.com/ext/ergodox/assembly">ErgoDox Keyboard Assembly Instructions</a>: The detailled step to build an Ergo Dox keyboard.</li> <li><a href="https://github.com/Ergodox-io/ErgoDox/tree/master/ErgoDOX%20pcb/gerber">Ergo Dox files</a>: Gerber files of the PCB. Really useful to understand how components are connected.</li> <li><a href="http://blog.fsck.com/2012/12/building-a-keyboard-part-1.html">Building a Keyboard: Part 1</a>: A blog entry about how Jesse Vincent made his own keyboard.</li> </ul> </div> </section> </div> <script>
    (function () {
        $('.popup-link').each(function (i, e) {
            var $e = $(e)
            $e.attr("data-lightbox", $e.attr("title"));
            $e.attr("data-title", $e.attr("title"));

            var fig = document.createElement("figure");
            var img = document.createElement("img");
            var caption = document.createElement("figcaption");
            $(img).attr("src", $e.attr("href"));
            $(img).attr("alt", $e.attr("title"));
            caption.appendChild(document.createTextNode($e.attr("title")));

            fig.appendChild(img);
            fig.appendChild(caption);
            e.appendChild(fig);
        });
    })()
</script> <script src="../../javascripts/lightbox2/js/lightbox.min.js"></script> <div class=comment> <div id=disqus_thread></div> <script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_config = function () {
        this.page.url = "https://benjamin.vanryseghem.com/blog/ergotron/";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = this.page.url; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function () {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//benjaminvanryseghem.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel=nofollow>comments powered by Disqus.</a></noscript> </div> <div id=footer_wrap class=outer> <footer class=inner> Copyright © 2013-2017 <a href="/">Benjamin Van Ryseghem</a>.<br/> The content of this website is distributed under the <a href="http://www.gnu.org/licenses/gpl-3.0.html" target=_blank>GPL 3.0</a> license. </footer> </div> </body> </html>