$(function(){function e(e,t,n){var o=e*n,r=t*(1-n);return parseInt(o+r)}function t(t,n,o){return"rgb("+e(t[0],n[0],o)+","+e(t[1],n[1],o)+","+e(t[2],n[2],o)+")"}function n(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function o(){}function r(e){var o=+jQuery(e).attr("data-percent"),r=[];r.push(new TweenMax.fromTo(e+" .p"+o+" .bar",100,{drawSVG:"0%"},{drawSVG:"100%"}));var a;if(o<50)a=t(S,h,o/50),r.push(new TweenMax.fromTo(e+" .p"+o+" .bar",100,{stroke:n(h)},{stroke:a}));else{a=t(x,S,(o-50)/50);var i=new TimelineMax;i.add(new TweenMax.fromTo(e+" .p"+o+" .bar",50,{stroke:n(h)},{stroke:n(S)})),i.add(new TweenMax.to(e+" .p"+o+" .bar",50,{stroke:a})),r.push(i)}return r}function a(e){return TweenMax.to("#"+e,300,{left:"50%",x:"-50%"})}function i(e){var t=0;switch(e){case"oop":t=0;break;case"fp":t=1;break;case"web":t=2;break;case"agile":t=3;break;case"tools":t=4}return TweenMax.to("#"+e,300,{left:20*t+"%",x:"0%"})}function c(e){return TweenMax.to("#"+e,100,{opacity:1})}function u(e){return TweenMax.to("#"+e,100,{opacity:0})}function p(e){return[TweenMax.to("#"+e+" .slice",200,{scale:2}),TweenMax.to("#"+e+" .percent",200,{fontSize:60}),TweenMax.to("#"+e+" .title",200,{top:"-240px",fontSize:"80px",onStart:function(){jQuery("#"+e+" .thermometer-content").width(640)},onReverseComplete:function(){jQuery("#"+e+" .thermometer-content").width(140)}})]}function l(e){return[TweenMax.to("#"+e+" .slice",200,{scale:1}),TweenMax.to("#"+e+" .percent",200,{fontSize:30}),TweenMax.to("#"+e+" .title",200,{top:"140px",fontSize:"40px",onComplete:function(){jQuery("#"+e+" .thermometer-content").width(140)},onReverseComplete:function(){jQuery("#"+e+" .thermometer-content").width(640)}})]}function s(e){return TweenMax.fromTo("#"+e+" .details-arc",100,{drawSVG:"0%"},{drawSVG:"100%"})}function d(e){return TweenMax.to("#"+e+" .details-arc",100,{drawSVG:"0%"})}function f(e,t){return TweenMax.fromTo("#"+e+" .details-line."+t,100,{drawSVG:"0%"},{drawSVG:"100%"})}function w(e,t){return TweenMax.to("#"+e+" .details-line."+t,100,{drawSVG:"0%"})}function m(e,t){return TweenMax.to("#popup-popup-"+e+"-"+t,100,{opacity:1,onStart:function(){jQuery("#popup-popup-"+e+"-"+t).addClass("active")},onReverseComplete:function(){jQuery("#popup-popup-"+e+"-"+t).removeClass("active")}})}function T(e,t){return TweenMax.to("#popup-popup-"+e+"-"+t,100,{opacity:0,onStart:function(){jQuery("#popup-popup-"+e+"-"+t).removeClass("active")},onReverseComplete:function(){jQuery("#popup-popup-"+e+"-"+t).addClass("active")}})}function g(e,t){var n=new TimelineMax;n.add(e.map(function(e){return r("#"+e)}));var o=new ScrollMagic.Controller;return new ScrollMagic.Scene({triggerElement:"#scroll-trigger",offset:t,duration:300}).setTween(n).addTo(o),300}function v(e,t){var n="#popup-popup-"+e+"-"+t+" .content",o=jQuery(n),r=o.find("section.slide").length,a=new TimelineMax;a.to(n,100,{top:0});for(var i=1;i<r;i++)a.to(n,100,{top:-300*i}),a.to(n,i===r-1?100:30,{top:-300*i});return a}function M(e,t,n,o){var r=n.filter(function(t){return t!==e}),g=new TimelineMax;g.add(r.map(function(e){return u(e)})),g.add(a(e)),g.add(p(e)),g.add(s(e)),t.forEach(function(t){g.add([f(e,t),m(e,t)]),g.add(v(e,t)),g.add([w(e,t),T(e,t)])}),g.add(d(e)),g.add(l(e)),g.add(i(e)),g.add(r.map(function(e){return c(e)}));var M=new ScrollMagic.Controller;return new ScrollMagic.Scene({triggerElement:"#scroll-trigger",offset:o,duration:14e3}).setTween(g).on("enter",function(){jQuery("#"+e).addClass("active")}).on("leave",function(){jQuery("#"+e).removeClass("active")}).addTo(M),14e3}var x=[136,224,95],S=[224,206,113],h=[224,91,94],y={oop:["st","js","dp"],fp:["lisp","clojure","caml"],web:["html","less-scss","svg"],agile:["unit-tests","scrum","pomodoro","oneflow"],tools:["remote","git","gtd","tasks","devops"]};setTimeout(function(){var e=0,t=Object.keys(y);o(),e+=g(t,e),t.forEach(function(n){var o=y[n];e+=M(n,o,t,e)});var n=$(window).height(),r=200,a=(n-r)/2,i=a/n,c=(.5-i)*n,u=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:"#scroll-trigger",triggerHook:i,duration:e-c}).setPin("#skills-move").addTo(u),new ScrollMagic.Scene({triggerElement:"#scroll-trigger",triggerHook:i,duration:1}).setTween(TweenMax.to("#scroll-to-top",1,{visibility:"visible"})).addTo(u)},0)});